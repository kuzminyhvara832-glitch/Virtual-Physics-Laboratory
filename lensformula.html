<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: white;
        }
        
        .lab-content {
            width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
        }
        
        .text-lab-title {
            color: #0d6efd;
            font-size: 28px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #0d6efd;
        }
        
        .text-lab-subtitle {
            color: #495057;
            font-size: 22px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        
        .text-lab-content {
            color: #495057;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .formula {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border-left: 5px solid #9c27b0;
        }
        
        .formula-text {
            font-family: 'Times New Roman', serif;
            font-size: 36px;
            font-weight: bold;
            color: #9c27b0;
        }
        
        .definitions {
            background: #f8f9fa;
            padding: 20px 20px 20px 40px;
            border-radius: 8px;
            margin: 20px 0;
            list-style: none;
        }
        
        .definitions li {
            padding: 8px 0;
            color: #495057;
            font-size: 16px;
            position: relative;
        }
        
        .definitions li:before {
            content: "‚Ä¢";
            color: #9c27b0;
            font-weight: bold;
            font-size: 20px;
            position: absolute;
            left: -20px;
        }
        
        .slider-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border: 1px solid #e9ecef;
        }
        
        .slider-section p {
            margin: 15px 0 8px;
            color: #495057;
            font-size: 16px;
            font-weight: 500;
        }
        
        .result-box {
            background: #f3e5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
            border: 2px solid #9c27b0;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        
        .result-box p {
            margin: 0;
            color: #9c27b0;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #9c27b0;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .lens-interactive {
            margin: 40px 0;
            padding: 30px;
            background: white;
        }
        
        .interactive-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }
        
        .control-panel {
            background: white;
            padding: 20px;
        }
        
        .control-group {
            margin-bottom: 25px;
        }
        
        .control-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
            display: block;
        }
        
        .slider-labels {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 5px;
        }
        
        .slider-labels span {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .slider-container {
            flex: 1;
            position: relative;
        }
        
        .value-display {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #495057;
            margin-top: 10px;
        }
        
        .stats-panel {
            background: white;
            padding: 20px;
            border: 1px solid #dee2e6;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 0;
            border-bottom: 1px solid #ced4da;
        }
        
        .stat-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .stat-label {
            color: #6c757d;
        }
        
        .stat-value {
            font-weight: bold;
            color: #495057;
        }
        
        button {
            padding: 12px 24px;
            background: #9c27b0;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            flex: 1;
        }
        
        button:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }
        
        .visualization-container {
            position: relative;
            height: 500px;
            background: linear-gradient(to bottom, #e3f2fd, #f3e5f5);
            border: 2px solid #dee2e6;
            overflow: hidden;
            border-radius: 8px;
        }
        
        .optical-axis {
            position: absolute;
            top: 250px;
            left: 0;
            right: 0;
            height: 2px;
            background: #6c757d;
            opacity: 0.5;
        }
        
        .lens {
            position: absolute;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 200px;
            border-left: 4px solid #2196f3;
            border-right: 4px solid #2196f3;
            border-radius: 100px;
            background: rgba(33, 150, 243, 0.1);
        }
        
        .lens-center {
            position: absolute;
            top: 250px;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border: 3px solid #2196f3;
            border-radius: 50%;
            background: white;
        }
        
        .object {
            position: absolute;
            width: 40px;
            height: 120px;
            background: linear-gradient(to bottom, #ff6b6b, #ff4757);
            border-radius: 4px;
            cursor: move;
        }
        
        .object-arrow {
            position: absolute;
            top: -20px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid #ff6b6b;
        }
        
        .image {
            position: absolute;
            width: 40px;
            height: 120px;
            background: linear-gradient(to bottom, #4caf50, #388e3c);
            border-radius: 4px;
            opacity: 0.8;
        }
        
        .image-arrow {
            position: absolute;
            top: -20px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid #4caf50;
        }
        
        .focal-point {
            position: absolute;
            top: 250px;
            width: 20px;
            height: 20px;
            border: 2px solid #ff9800;
            border-radius: 50%;
            background: rgba(255, 152, 0, 0.2);
        }
        
        .focal-label {
            position: absolute;
            color: #ff9800;
            font-weight: bold;
            font-size: 14px;
        }
        
        .ray {
            position: absolute;
            height: 2px;
            background: #ff9800;
            transform-origin: left center;
            opacity: 0.7;
        }
        
        .ray::after {
            content: '‚Üí';
            position: absolute;
            right: -10px;
            top: -8px;
            color: #ff9800;
            font-size: 16px;
        }
        
        .distance-line {
            position: absolute;
            height: 1px;
            border-top: 2px dashed #6c757d;
        }
        
        .distance-label {
            position: absolute;
            color: #6c757d;
            font-size: 14px;
            background: white;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .scale {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 20px;
            border-top: 1px solid #6c757d;
        }
        
        .scale-mark {
            position: absolute;
            top: 0;
            width: 1px;
            height: 10px;
            background: #6c757d;
        }
        
        .scale-number {
            position: absolute;
            top: 12px;
            font-size: 12px;
            color: #6c757d;
            transform: translateX(-50%);
        }
        
        .lens-type {
            position: absolute;
            top: 20px;
            left: 20px;
            font-weight: bold;
            color: #2196f3;
            background: white;
            padding: 5px 10px;
            border-radius: 4px;
            border: 2px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="lab-content">
        <h1 class="text-lab-title">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –§–æ—Ä–º—É–ª–µ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã</h1>

        <p class="text-lab-content">–í —Ö–æ–¥–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—É–¥–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è —Ñ–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è–º–∏ –æ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–æ –ª–∏–Ω–∑—ã –∏ –æ—Ç –ª–∏–Ω–∑—ã –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ñ–æ–∫—É—Å–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º –ª–∏–Ω–∑—ã.</p>

        <h2 class="text-lab-subtitle">–•–æ–¥ —Ä–∞–±–æ—Ç—ã</h2>

        <ol class="text-lab-content">
            <li>–ò–∑—É—á–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã
                <p>–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã:</p>
                <div class="formula">
                    <span class="formula-text">1/F = 1/d + 1/f</span>
                </div>
                <p>–≥–¥–µ</p>
                <ul class="definitions">
                    <li><b>F</b> ‚Äî —Ñ–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∑—ã (–º)</li>
                    <li><b>d</b> ‚Äî —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–æ –ª–∏–Ω–∑—ã (–º)</li>
                    <li><b>f</b> ‚Äî —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ª–∏–Ω–∑—ã –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–º)</li>
                </ul>
                <p>–î–ª—è —Å–æ–±–∏—Ä–∞—é—â–µ–π –ª–∏–Ω–∑—ã: F > 0, –¥–ª—è —Ä–∞—Å—Å–µ–∏–≤–∞—é—â–µ–π: F < 0</p>
            </li>
            <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç —Ñ–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∑—ã –∏ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞.</p>
                <div class="slider-section">
                    <p>–§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (F): <span id="focal-value">0.3</span> –º</p>
                    <input type="range" min="-0.5" max="0.5" step="0.05" value="0.3" id="focal-slider">
                    
                    <p>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (d): <span id="object-distance-value">0.6</span> –º</p>
                    <input type="range" min="0.1" max="1.5" step="0.05" value="0.6" id="object-distance-slider">
                    
                    <p>–í—ã—Å–æ—Ç–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ (h): <span id="object-height-value">0.1</span> –º</p>
                    <input type="range" min="0.05" max="0.3" step="0.01" value="0.1" id="object-height-slider">
                </div>
            </li>
            <li>–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
                <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>
                <div class="result-box">
                    <p>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (f): <span id="image-distance-value">0.60</span> –º</p>
                    <p>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ (Œì): <span id="magnification-value">1.00</span></p>
                </div>
            </li>
            <li>–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                <p>–ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.</p>

                <div class="lens-interactive">
                    <h3 style="margin-top: 0; color: #212529; font-size: 1.5rem; text-align: center; margin-bottom: 25px;">
                        –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª—ã —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã
                    </h3>
                   
                    <div class="interactive-grid">
                        <div class="control-panel">
                            <div class="control-group">
                                <div class="control-label">–§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (F)</div>
                                <div class="slider-labels">
                                    <span>–†–∞—Å—Å–µ–∏–≤–∞—é—â–∞—è</span>
                                    <div class="slider-container">
                                        <input type="range" style="background: linear-gradient(to right, #ff5252, #2196f3);" min="-0.5" max="0.5" step="0.05" value="0.3" id="interactive-focal">
                                    </div>
                                    <span>–°–æ–±–∏—Ä–∞—é—â–∞—è</span>
                                </div>
                                <div class="value-display">
                                    <span id="interactive-focal-value">0.30</span> –º
                                </div>
                            </div>
                           
                            <div class="control-group">
                                <div class="control-label">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (d)</div>
                                <div class="slider-labels">
                                    <span>–ë–ª–∏–∑–∫–æ</span>
                                    <div class="slider-container">
                                        <input type="range" style="background: linear-gradient(to right, #ff6b6b, #4caf50);" min="0.1" max="1.5" step="0.05" value="0.6" id="interactive-object-distance">
                                    </div>
                                    <span>–î–∞–ª–µ–∫–æ</span>
                                </div>
                                <div class="value-display">
                                    <span id="interactive-object-distance-value">0.60</span> –º
                                </div>
                            </div>
                           
                            <div class="control-group">
                                <div class="control-label">–í—ã—Å–æ—Ç–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ (h)</div>
                                <div class="slider-labels">
                                    <span>–ú–∞–ª–µ–Ω—å–∫–∏–π</span>
                                    <div class="slider-container">
                                        <input type="range" style="background: linear-gradient(to right, #ff6b6b, #ff9800);" min="0.05" max="0.3" step="0.01" value="0.1" id="interactive-object-height">
                                    </div>
                                    <span>–ë–æ–ª—å—à–æ–π</span>
                                </div>
                                <div class="value-display">
                                    <span id="interactive-object-height-value">0.10</span> –º
                                </div>
                            </div>
                           
                            <div class="stats-panel">
                                <div class="stat-item">
                                    <span class="stat-label">–ü–æ–ª–æ–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</span>
                                    <span class="stat-value" style="color: #4caf50;" id="interactive-image-position">0.60 –º</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">–£–≤–µ–ª–∏—á–µ–Ω–∏–µ:</span>
                                    <span class="stat-value" style="color: #9c27b0;" id="interactive-magnification">1.00</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">–•–∞—Ä–∞–∫—Ç–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</span>
                                    <span class="stat-value" style="color: #2196f3;" id="interactive-image-type">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ</span>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 10px; margin-top: 20px;">
                                <button id="show-rays-btn">
                                    üìê –ü–æ–∫–∞–∑–∞—Ç—å –ª—É—á–∏
                                </button>
                                <button id="reset-btn">
                                    ‚ü≤ –°–±—Ä–æ—Å
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <div class="visualization-container" id="visualization">
                                <div class="optical-axis"></div>
                                <div class="lens"></div>
                                <div class="lens-center"></div>
                                
                                <div class="focal-point" id="focal-point-f" style="left: calc(50% + 150px);"></div>
                                <div class="focal-label" style="left: calc(50% + 155px); top: 235px;">F</div>
                                
                                <div class="focal-point" id="focal-point-2f" style="left: calc(50% + 300px);"></div>
                                <div class="focal-label" style="left: calc(50% + 305px); top: 235px;">2F</div>
                                
                                <div class="focal-point" id="focal-point-minus-f" style="left: calc(50% - 150px);"></div>
                                <div class="focal-label" style="left: calc(50% - 145px); top: 235px;">-F</div>
                                
                                <div class="focal-point" id="focal-point-minus-2f" style="left: calc(50% - 300px);"></div>
                                <div class="focal-label" style="left: calc(50% - 295px); top: 235px;">-2F</div>
                                
                                <div class="object" id="object" style="left: calc(50% - 300px); top: 190px;">
                                    <div class="object-arrow"></div>
                                </div>
                                
                                <div class="image" id="image" style="left: calc(50% + 300px); top: 190px;">
                                    <div class="image-arrow"></div>
                                </div>
                                
                                <div class="lens-type" id="lens-type">
                                    –°–æ–±–∏—Ä–∞—é—â–∞—è –ª–∏–Ω–∑–∞
                                </div>
                                
                                <div class="ray" id="ray-parallel" style="display: none;"></div>
                                <div class="ray" id="ray-focal" style="display: none;"></div>
                                <div class="ray" id="ray-central" style="display: none;"></div>
                                
                                <div class="distance-line" id="distance-object" style="top: 320px; left: calc(50% - 300px); width: 300px;"></div>
                                <div class="distance-label" style="top: 325px; left: 50%;">d = 0.60 –º</div>
                                
                                <div class="distance-line" id="distance-image" style="top: 350px; left: 50%; width: 300px;"></div>
                                <div class="distance-label" style="top: 355px; left: calc(50% + 150px);">f = 0.60 –º</div>
                                
                                <div class="scale">
                                    <div class="scale-mark" style="left: 0;"></div>
                                    <div class="scale-number" style="left: 0;">-1.5</div>
                                    
                                    <div class="scale-mark" style="left: 25%;"></div>
                                    <div class="scale-number" style="left: 25%;">-0.75</div>
                                    
                                    <div class="scale-mark" style="left: 50%;"></div>
                                    <div class="scale-number" style="left: 50%;">0</div>
                                    
                                    <div class="scale-mark" style="left: 75%;"></div>
                                    <div class="scale-number" style="left: 75%;">0.75</div>
                                    
                                    <div class="scale-mark" style="left: 100%;"></div>
                                    <div class="scale-number" style="left: 100%;">1.5</div>
                                </div>
                            </div>
                            
                            <div style="text-align: center; color: #6c757d; font-size: 0.85rem; margin-top: 10px;">
                                <em>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç –≤–¥–æ–ª—å –æ–ø—Ç–∏—á–µ—Å–∫–æ–π –æ—Å–∏. –ú–µ–Ω—è–π—Ç–µ —Ñ–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∑—ã!</em>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ol>

        <h2 class="text-lab-subtitle">–í—ã–≤–æ–¥</h2>

        <p class="text-lab-content">–í —ç—Ç–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –ø—É—Ç—ë–º –∏–∑—É—á–∏—Ç —Ñ–æ—Ä–º—É–ª—É —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ª–∏–Ω–∑: –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ/–º–Ω–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø—Ä—è–º–æ–µ/–ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–æ–µ, —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ/—É–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ. –¢–∞–∫–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –∑–∞–∫–æ–Ω—ã –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–∫–∏.</p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(function() {
            let focalLength = 0.3;
            let objectDistance = 0.6;
            let objectHeight = 0.1;
            let imageDistance = 0;
            let magnification = 0;
            let showRays = false;
            let isDragging = false;

            const SCALE = 500;
            
            updateValues();
            makeObjectDraggable();
            
            function updateValues() {
                focalLength = parseFloat($('#focal-slider').val());
                objectDistance = parseFloat($('#object-distance-slider').val());
                objectHeight = parseFloat($('#object-height-slider').val());
                
                // –§–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã: 1/F = 1/d + 1/f
                if (focalLength !== 0 && objectDistance !== 0) {
                    imageDistance = 1 / (1/focalLength - 1/objectDistance);
                    magnification = -imageDistance / objectDistance;
                } else {
                    imageDistance = 0;
                    magnification = 0;
                }
                
                $('#focal-value').text(focalLength.toFixed(2));
                $('#object-distance-value').text(objectDistance.toFixed(2));
                $('#object-height-value').text(objectHeight.toFixed(2));
                $('#image-distance-value').text(imageDistance.toFixed(2));
                $('#magnification-value').text(magnification.toFixed(2));
                
                $('#interactive-focal').val(focalLength);
                $('#interactive-object-distance').val(objectDistance);
                $('#interactive-object-height').val(objectHeight);
                
                updateInteractiveValues();
            }
            
            function updateInteractiveValues() {
                focalLength = parseFloat($('#interactive-focal').val());
                objectDistance = parseFloat($('#interactive-object-distance').val());
                objectHeight = parseFloat($('#interactive-object-height').val());
                
                // –§–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã
                if (focalLength !== 0 && objectDistance !== 0) {
                    imageDistance = 1 / (1/focalLength - 1/objectDistance);
                    magnification = -imageDistance / objectDistance;
                } else {
                    imageDistance = 0;
                    magnification = 0;
                }
                
                $('#interactive-focal-value').text(focalLength.toFixed(2));
                $('#interactive-object-distance-value').text(objectDistance.toFixed(2));
                $('#interactive-object-height-value').text(objectHeight.toFixed(2));
                $('#interactive-image-position').text(imageDistance.toFixed(2) + ' –º');
                $('#interactive-magnification').text(magnification.toFixed(2));

                let imageType = '';
                let imageCharacter = '';
                
                if (focalLength > 0) { // –°–æ–±–∏—Ä–∞—é—â–∞—è –ª–∏–Ω–∑–∞
                    if (objectDistance > focalLength) {
                        imageType = '–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ';
                        imageCharacter = '–ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–æ–µ';
                    } else if (objectDistance < focalLength) {
                        imageType = '–ú–Ω–∏–º–æ–µ';
                        imageCharacter = '–ø—Ä—è–º–æ–µ';
                    } else {
                        imageType = '–í —Ñ–æ–∫—É—Å–µ';
                        imageCharacter = '–Ω–∞ ‚àû';
                    }
                } else { // –†–∞—Å—Å–µ–∏–≤–∞—é—â–∞—è –ª–∏–Ω–∑–∞
                    imageType = '–ú–Ω–∏–º–æ–µ';
                    imageCharacter = '–ø—Ä—è–º–æ–µ';
                }
                
                $('#interactive-image-type').text(`${imageType}, ${imageCharacter}`);
                
                $('#focal-slider').val(focalLength);
                $('#object-distance-slider').val(objectDistance);
                $('#object-height-slider').val(objectHeight);
                $('#focal-value').text(focalLength.toFixed(2));
                $('#object-distance-value').text(objectDistance.toFixed(2));
                $('#object-height-value').text(objectHeight.toFixed(2));
                $('#image-distance-value').text(imageDistance.toFixed(2));
                $('#magnification-value').text(magnification.toFixed(2));
                
                updateVisualization();
            }
            
            function updateVisualization() {
                const centerX = $('#visualization').width() / 2;
                const centerY = 250;
                
                // –¢–∏–ø –ª–∏–Ω–∑—ã
                if (focalLength > 0) {
                    $('#lens-type').text('–°–æ–±–∏—Ä–∞—é—â–∞—è –ª–∏–Ω–∑–∞').css({
                        color: '#2196f3',
                        borderColor: '#2196f3'
                    });
                } else {
                    $('#lens-type').text('–†–∞—Å—Å–µ–∏–≤–∞—é—â–∞—è –ª–∏–Ω–∑–∞').css({
                        color: '#ff5252',
                        borderColor: '#ff5252'
                    });
                }
                
                // –ü–æ–∑–∏—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ (—Å–ª–µ–≤–∞ –æ—Ç –ª–∏–Ω–∑—ã)
                const objectLeft = centerX - (objectDistance * SCALE);
                const objectHeightPx = objectHeight * SCALE;
                
                $('#object').css({
                    left: (objectLeft - 20) + 'px',
                    top: (centerY - objectHeightPx/2) + 'px',
                    height: objectHeightPx + 'px'
                });
                
                // –ü–æ–∑–∏—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–ø—Ä–∞–≤–∞ –æ—Ç –ª–∏–Ω–∑—ã –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ, —Å–ª–µ–≤–∞ –¥–ª—è –º–Ω–∏–º–æ–≥–æ)
                let imageLeft, imageHeightPx;
                
                if (imageDistance > 0) {
                    imageLeft = centerX + (imageDistance * SCALE);
                    imageHeightPx = Math.abs(magnification) * objectHeightPx;
                    
                    $('#image').css({
                        left: (imageLeft - 20) + 'px',
                        top: (centerY - imageHeightPx/2) + 'px',
                        height: imageHeightPx + 'px',
                        background: magnification > 0 ? 
                            'linear-gradient(to bottom, #4caf50, #388e3c)' : 
                            'linear-gradient(to top, #4caf50, #388e3c)' 
                    });
                    
                    if (magnification > 0) {
                        $('#image .image-arrow').css({
                            borderBottomColor: '#4caf50',
                            borderTop: 'none'
                        });
                    } else {
                        $('#image .image-arrow').css({
                            borderTopColor: '#4caf50',
                            borderBottom: 'none',
                            top: imageHeightPx + 'px'
                        });
                    }
                    
                    $('#image').show();
                } else if (imageDistance < 0) { 
                    imageLeft = centerX + (imageDistance * SCALE);
                    imageHeightPx = Math.abs(magnification) * objectHeightPx;
                    
                    $('#image').css({
                        left: (imageLeft - 20) + 'px',
                        top: (centerY - imageHeightPx/2) + 'px',
                        height: imageHeightPx + 'px',
                        background: 'linear-gradient(to bottom, #ff9800, #f57c00)'
                    });
                    
                    $('#image').show();
                } else {
                    $('#image').hide();
                }
                
                const focalPx = Math.abs(focalLength) * SCALE;
                
                $('#focal-point-f').css('left', (centerX + focalPx) + 'px');
                $('#focal-label-f').css('left', (centerX + focalPx + 5) + 'px');
                
                $('#focal-point-2f').css('left', (centerX + 2*focalPx) + 'px');
                $('#focal-label-2f').css('left', (centerX + 2*focalPx + 5) + 'px');
                
                $('#focal-point-minus-f').css('left', (centerX - focalPx) + 'px');
                $('#focal-label-minus-f').css('left', (centerX - focalPx + 5) + 'px');
                
                $('#focal-point-minus-2f').css('left', (centerX - 2*focalPx) + 'px');
                $('#focal-label-minus-2f').css('left', (centerX - 2*focalPx + 5) + 'px');
                
                $('#distance-object').css({
                    left: objectLeft + 'px',
                    width: Math.abs(centerX - objectLeft) + 'px'
                });
                
                $('#distance-image').css({
                    left: centerX + 'px',
                    width: Math.abs(imageLeft - centerX) + 'px',
                    display: Math.abs(imageDistance) > 0.1 ? 'block' : 'none'
                });
                
                $('.distance-label').eq(0).text(`d = ${objectDistance.toFixed(2)} –º`);
                $('.distance-label').eq(1).text(`f = ${Math.abs(imageDistance).toFixed(2)} –º`);
                

                if (showRays) {
                    drawRays();
                }
            }
            
            function drawRays() {
                const centerX = $('#visualization').width() / 2;
                const centerY = 250;
                const objectLeft = centerX - (objectDistance * SCALE);
                const objectHeightPx = objectHeight * SCALE;
                const objectTop = centerY - objectHeightPx/2;
                const focalPx = focalLength * SCALE;
                
                if (focalLength > 0 && objectDistance > focalLength) {
                    $('#ray-parallel').css({
                        left: objectLeft + 'px',
                        top: objectTop + 'px',
                        width: (centerX - objectLeft) + 'px',
                        transform: 'rotate(0deg)'
                    }).show();
                    
                    $('#ray-focal').css({
                        left: centerX + 'px',
                        top: objectTop + 'px',
                        width: (imageDistance * SCALE) + 'px',
                        transform: `rotate(${Math.atan2(objectTop - centerY, imageDistance * SCALE) * 180 / Math.PI}deg)`
                    }).show();
                } else {
                    $('#ray-parallel').hide();
                    $('#ray-focal').hide();
                }
                
                $('#ray-central').css({
                    left: objectLeft + 'px',
                    top: objectTop + 'px',
                    width: Math.sqrt(Math.pow(centerX + imageDistance * SCALE - objectLeft, 2) + 
                                    Math.pow(250 - objectTop, 2)) + 'px',
                    transform: `rotate(${Math.atan2(250 - objectTop, centerX + imageDistance * SCALE - objectLeft) * 180 / Math.PI}deg)`
                }).show();
            }
            
            function makeObjectDraggable() {
                let startX = 0;
                let startLeft = 0;
                
                $('#object').on('mousedown', function(e) {
                    e.preventDefault();
                    isDragging = true;
                    
                    startX = e.clientX;
                    startLeft = parseInt($(this).css('left')) || 200;
                    
                    $(this).css('cursor', 'grabbing');
                    
                    $(document).on('mousemove', function(e) {
                        if (!isDragging) return;
                        
                        const deltaX = e.clientX - startX;
                        let newLeft = startLeft + deltaX;
                        
                        const centerX = $('#visualization').width() / 2;
                        newLeft = Math.max(50, Math.min(newLeft, centerX - 100));
                        
                        $('#object').css('left', newLeft + 'px');
                        
                        const newDistance = (centerX - newLeft - 20) / SCALE;
                        objectDistance = Math.max(0.1, Math.min(1.5, newDistance));
                        
                        $('#interactive-object-distance').val(objectDistance);
                        updateInteractiveValues();
                    });
                    
                    $(document).on('mouseup', function() {
                        if (!isDragging) return;
                        
                        isDragging = false;
                        $('#object').css('cursor', 'move');
                        
                        $(document).off('mousemove');
                        $(document).off('mouseup');
                    });
                });
            }

            $('#focal-slider, #object-distance-slider, #object-height-slider').on('input', updateValues);
            $('#interactive-focal, #interactive-object-distance, #interactive-object-height').on('input', updateInteractiveValues);
            
            $('#show-rays-btn').click(function() {
                showRays = !showRays;
                $(this).text(showRays ? 'üìê –°–∫—Ä—ã—Ç—å –ª—É—á–∏' : 'üìê –ü–æ–∫–∞–∑–∞—Ç—å –ª—É—á–∏');
                updateVisualization();
            });
            
            $('#reset-btn').click(function() {
                focalLength = 0.3;
                objectDistance = 0.6;
                objectHeight = 0.1;
                
                $('#interactive-focal').val(focalLength);
                $('#interactive-object-distance').val(objectDistance);
                $('#interactive-object-height').val(objectHeight);
                
                updateInteractiveValues();
            });
        });
    </script>
</body>
</html>